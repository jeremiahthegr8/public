<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Checkout Page</title>
  <link rel="stylesheet" href="checkout.css" />
  <!-- Firebase SDKs -->
  <script type="module" src="https://www.gstatic.com/firebasejs/11.3.1/firebase-app.js"></script>
  <script type="module" src="https://www.gstatic.com/firebasejs/11.3.1/firebase-auth.js"></script>
  <script type="module" src="https://www.gstatic.com/firebasejs/11.3.1/firebase-firestore.js"></script>
  <!-- Your Firebase configuration -->
  <script type="module" src="./checkout.js"></script>
</head>
<body>
  <div class="checkout-container">
    <!-- Progress Indicator -->
    <div class="progress-steps">
      <div class="step" data-step="1">1. Address</div>
      <div class="step" data-step="2">2. Order Summary</div>
      <div class="step" data-step="3">3. Payment</div>
      <div class="step" data-step="4">4. Confirm</div>
    </div>

    <!-- Form Sections -->
    <form id="checkout-form">
      <!-- Step 1: Address and Contact Info -->
      <div class="form-step" data-step="1">
        <h2>Confirm Your Address</h2>
        <div class="form-group">
          <label for="full-name">Full Name</label>
          <input type="text" id="full-name" name="full-name" readonly required>
        </div>
        <div class="form-group">
          <label for="phone">Phone Number</label>
          <input type="tel" id="phone" name="phone" readonly required>
        </div>
        <div class="form-group">
          <label for="address">Address</label>
          <input type="text" id="address" name="address" required>
        </div>
        <div class="form-group">
          <label for="city">City</label>
          <input type="text" id="city" name="city" required>
        </div>
        <div class="form-group">
          <label for="state">State</label>
          <select id="state" name="state" required>
            <option value="">Select State</option>
            <option value="State1">State 1</option>
            <option value="State2">State 2</option>
          </select>
        </div>
        <div class="form-group">
          <label for="country">Country</label>
          <select id="country" name="country" required>
            <option value="">Select Country</option>
            <option value="Country1">Country 1</option>
            <option value="Country2">Country 2</option>
          </select>
        </div>
        <div class="form-group">
          <label for="zip">ZIP Code</label>
          <input type="text" id="zip" name="zip">
        </div>
        <button type="button" class="next-btn">Next</button>
      </div>

      <!-- Step 2: Order Summary -->
      <div class="form-step" data-step="2">
        <h2>Order Summary</h2>
        <div class="order-summary" id="order-summary">
          <!-- Cart items will be inserted dynamically -->
        </div>
        <button type="button" class="prev-btn">Back</button>
        <button type="button" class="next-btn">Next</button>
      </div>

      <!-- Step 3: Payment Method -->
      <div class="form-step" data-step="3">
        <h2>Choose Payment Method</h2>
        <!-- Saved Payment Methods -->
        <div class="form-group" id="saved-payment-methods">
          <!-- Saved methods will be loaded here -->
        </div>
        <!-- New Payment Options -->
        <div class="form-group">
          <label>
            <input type="radio" name="payment-method" value="momo-new" required> Mobile Money (MoMo)
          </label>
          <label>
            <input type="radio" name="payment-method" value="card-new" required> Debit/Credit Card
          </label>
          <label>
            <input type="radio" name="payment-method" value="cash" checked required> Cash on Delivery
          </label>
        </div>
        <!-- MoMo Section (without required attributes by default) -->
        <div class="payment-details" id="momo-details">
          <div class="form-group">
            <label for="momo-number">MoMo Number</label>
            <input type="tel" id="momo-number" name="momo-number" placeholder="e.g., 024XXXXXXXX">
          </div>
          <div class="form-group">
            <label>
              <input type="checkbox" id="remember-momo"> Remember this payment method
            </label>
          </div>
        </div>
        <!-- Card Section (without required attributes by default) -->
        <div class="payment-details" id="card-details">
          <div class="form-group">
            <label for="card-name">Name on Card</label>
            <input type="text" id="card-name" name="card-name" placeholder="e.g., John Doe">
          </div>
          <div class="form-group">
            <label for="card-number">Card Number</label>
            <input type="text" id="card-number" name="card-number" placeholder="1234 5678 9012 3456" maxlength="19">
          </div>
          <div class="form-group">
            <label for="expiry">Expiration Date</label>
            <input type="text" id="expiry" name="expiry" placeholder="MM/YY" maxlength="5">
          </div>
          <div class="form-group">
            <label for="cvv">CVV</label>
            <input type="text" id="cvv" name="cvv" placeholder="123" maxlength="3">
          </div>
          <div class="form-group">
            <label>
              <input type="checkbox" id="remember-card"> Remember this payment method
            </label>
          </div>
        </div>
        <button type="button" class="prev-btn">Back</button>
        <button type="button" class="next-btn">Next</button>
      </div>

      <!-- Step 4: Confirmation -->
      <div class="form-step" data-step="4">
        <h2>Confirm Your Order</h2>
        <div class="confirmation-details">
          <p><strong>Name:</strong> <span id="confirm-name"></span></p>
          <p><strong>Phone:</strong> <span id="confirm-phone"></span></p>
          <p><strong>Address:</strong> <span id="confirm-address"></span></p>
          <p><strong>Total:</strong> $<span id="confirm-total"></span></p>
          <p><strong>Payment Method:</strong> <span id="confirm-payment"></span></p>
        </div>
        <button type="button" class="prev-btn">Back</button>
        <button type="submit" class="submit-btn">Place Order</button>
      </div>
    </form>
  </div>

  <!-- Prevent browser back navigation -->
  <script>
    history.pushState(null, null, location.href);
    window.onpopstate = function () {
      history.pushState(null, null, location.href);
    };
  </script>
  <script type="module" src="checkout.js"></script>
</body>
</html>
