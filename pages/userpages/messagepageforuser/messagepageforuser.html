<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Buyer Messaging | MarketPlace</title>
    <link rel="stylesheet" href="./messagepageforuser.css" />
    <script type="module" src="./messagepageforuser.js"></script>
  </head>
  <body>
    <div class="container">
      <!-- Sidebar with Conversations -->
      <div class="sidebar">
        <div class="goback">
          <a href="../account/account.html" class="back-button">
            <svg
              style="vertical-align: middle; margin-right: 8px"
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="currentColor"
              viewBox="0 0 16 16"
            >
              <path
                fill-rule="evenodd"
                d="M15 8a.5.5 0 0 1-.5.5H3.707l4.147 4.146a.5.5 0 0 1-.708.708l-5-5a.5.5 0 0 1 0-.708l5-5a.5.5 0 0 1 .708.708L3.707 7.5H14.5A.5.5 0 0 1 15 8z"
              />
            </svg>
            Back
          </a>
        </div>
        <div class="sidebar-header">
          <div class="logo">MarketPlace</div>
          <div class="search-box">
            <span class="search-icon">üîç</span>
            <input
              type="text"
              id="searchInput"
              placeholder="Search conversations..."
            />
          </div>
        </div>
        <div class="conversations" id="chatList">
          <!-- Loading and conversation items will be rendered here in realtime -->
          <p class="loading" id="chatListLoading">Loading chats...</p>
        </div>
      </div>
      <!-- Main Chat Area -->
      <div class="main">
        <div class="chat-container" id="chatContainer">
          <!-- When no chat is selected, show a centered prompt -->
          <div class="no-chat-selected" id="noChatSelected">
            Select a conversation
          </div>
          <!-- Chat header & input area will be revealed when a chat is selected -->
          <div class="chat-header" id="chatHeader" style="display: none">
            <div class="seller-info" id="sellerInfo">
              <div class="seller-avatar" id="sellerAvatar">
                <img
                  src="../../../assets/images/new/defaultpfp.png"
                  alt="Seller Avatar"
                />
              </div>
              <div class="seller-details">
                <h3 id="sellerName">Seller Name</h3>
                <p id="sellerStatus">
                  <span class="status-indicator offline"></span> Offline
                </p>
              </div>
            </div>
          </div>
          <div class="messages-container" id="chatMessages"></div>
          <div class="reply-container" id="chatInputArea" style="display: none">
            <div class="action-icon" id="uploadImgBtn">üìé</div>
            <textarea
              id="messageInput"
              placeholder="Type your message..."
            ></textarea>
            <button class="send-button" id="sendMessage">‚û§</button>
            <input
              type="file"
              id="imgUpload"
              accept="image/*"
              style="display: none"
            />
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
