<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Premium Wireless Noise-Cancelling Headphones - TechGear</title>
    <link rel="stylesheet" href="./product.css" />
    <script type="module" src="./product.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../../../assets/styles/animation.css" />
    <link rel="stylesheet" href="../../../assets/styles/header.css" />
  </head>

  <body>
    <header class="header">
      <div class="header-container">
        <div class="logo">
          <a href="../../../index.html">E-Shop</a>
        </div>
        <div class="search-bar">
          <input
            type="text"
            placeholder="Search products..."
            id="searchInput"
          />
          <button id="searchBtn"><i class="fas fa-search"></i></button>
        </div>
        <div class="user-menu">
          <a href="../account/account.html" class="sixty-nine account-link"
            ><i class="fas fa-user"></i> Profile</a
          >
          <div class="seventy-one">
            <a href="../wishlist/wishlist.html" class="sixty-nine"
              ><i class="fas fa-heart"></i> Wishlist</a
            >
            <a href="../mycart/mycart.html" class="sixty-nine"
              ><i class="fas fa-shopping-cart"></i> Cart</a
            >
          </div>
          <a href="../SignUp/SignUp.html" class="seventy signup-link"
            >Sign In</a
          >
          <a href="#" class="seventy logout-btn" style="display: none"
            >Logout</a
          >
        </div>
      </div>
    </header>

    <main class="container">
      <div class="breadcrumb">
        <a href="#">Home</a> > <a href="#">Electronics</a> >
        <a href="#">Audio</a> > <a href="#">Headphones</a> > Premium Wireless
        Noise-Cancelling Headphones
      </div>

      <section class="product-section">
        <div class="imagescon">
          <div class="product-images">
            <div class="thumbnail-container">
              <img
                src="../../../assets/images/nike-air-max-nike-free-air-force-shoe-nike-91a57ad774c86d907884aad806d0cfeb.png"
                alt="Product thumbnail 1"
                class="thumbnail active"
              />
              <img
                src="../../../assets/images/fc-barcelona-t-shirt-la-liga-kit-jersey-barcelona-58d3331a7966b2bdc03313e2958e521f.png"
                alt="Product thumbnail 2"
                class="thumbnail"
              />
              <img
                src="../../../assets/images/hoodie-t-shirt-supreme-bluza-t-shirt-9e02e46feebfa8030fb0fcfc449a7102.png"
                alt="Product thumbnail 3"
                class="thumbnail"
              />
              <img
                src="../../../assets/images/air-jordan-shoe-nike-sneakers-adidas-yeezy-jordan-9d493e6896549a636419ee58d67ba6c0.png"
                alt="Product thumbnail 4"
                class="thumbnail"
              />
            </div>
            <div class="main-image-container">
              <img
                src="../../../assets/images/5bbc4e5d80edd-28a1b35d0007a0d0ca41e63620536c93.png"
                alt="Premium Wireless Noise-Cancelling Headphones"
                class="main-image"
              />
            </div>
          </div>
          <div class="actionscon">
            <div class="attribute-group">
              <div class="attribute-name">Color:</div>
              <div class="attribute-value">Black</div>
            </div>

            <div class="action-buttons">
              <button class="add-to-cart">
                <span>Add to Cart</span>
              </button>
              <button class="buy-now">Go to Cart</button>
              <button class="wishlist-button">♡</button>
            </div>
          </div>
        </div>

        <div class="product-info">
          <h1>Premium Wireless Noise-Cancelling Headphones</h1>

          <div class="product-price">
            <span class="current-price">$249.99</span>
            <span class="old-price">$299.99</span>
            <span class="discount">-17%</span>
          </div>

          <div class="availability">
            <span class="stock-status">In Stock</span>
            <span class="stock-count">(23 available)</span>
          </div>

          <div class="product-meta">
            <div class="product-rating">
              <div class="stars">★★★★★</div>
              <span class="reviews-count">4.8 (342 reviews)</span>
            </div>
            <div class="product-sku">SKU: TG-WH-8500</div>
          </div>

          <div class="product-attributes">
            <p class="description">
              This is a detailed description of the product. It highlights the
              key features, benefits, and specifications of the product.
            </p>

            <div class="attributes">
              <h3>Attributes</h3>
              <ul>
                <li><strong>Color:</strong> Black</li>
                <li><strong>Size:</strong> Medium</li>
                <li><strong>Material:</strong> Cotton</li>
              </ul>
            </div>

            <!-- Tags -->
            <div class="tags">
              <h3>Tags</h3>
              <div class="tag-list">
                <span>Electronics</span>
                <span>Gadgets</span>
                <span>Accessories</span>
              </div>
            </div>

            <div class="product-highlights">
              <div class="feature">✓ Free shipping & returns</div>
              <div class="feature">✓ 30-day money-back guarantee</div>
              <div class="feature">✓ 24-month warranty</div>
            </div>
          </div>
        </div>
      </section>

      <section class="customer-reviews">
        <div class="reviews-summary">
          <div class="reviews-header">
            <h2>Customer Reviews</h2>
            <button class="view-all-reviews">View All 342 Reviews</button>
          </div>
          <div class="average-rating">
            <div class="rating-number">4.8</div>
            <div class="rating-stars">★★★★★</div>
            <div class="rating-count">Based on 342 reviews</div>
          </div>

          <div class="rating-distribution">
            <div class="rating-bar">
              <div class="rating-level">5 ★</div>
              <div class="progress-container">
                <div class="progress" style="width: 86%"></div>
              </div>
              <div class="progress-percent">86%</div>
            </div>
            <div class="rating-bar">
              <div class="rating-level">4 ★</div>
              <div class="progress-container">
                <div class="progress" style="width: 9%"></div>
              </div>
              <div class="progress-percent">9%</div>
            </div>
            <div class="rating-bar">
              <div class="rating-level">3 ★</div>
              <div class="progress-container">
                <div class="progress" style="width: 3%"></div>
              </div>
              <div class="progress-percent">3%</div>
            </div>
            <div class="rating-bar">
              <div class="rating-level">2 ★</div>
              <div class="progress-container">
                <div class="progress" style="width: 1%"></div>
              </div>
              <div class="progress-percent">1%</div>
            </div>
            <div class="rating-bar">
              <div class="rating-level">1 ★</div>
              <div class="progress-container">
                <div class="progress" style="width: 1%"></div>
              </div>
              <div class="progress-percent">1%</div>
            </div>
          </div>
        </div>

        <div class="review-list">
          <div class="review-item">
            <div class="review-header">
              <div class="reviewer-info">
                <div class="reviewer-avatar">JD</div>
                <div>
                  <div class="reviewer-name">John Doe</div>
                  <div class="rating-stars">★★★★★</div>
                </div>
              </div>
              <div class="review-date">January 15, 2025</div>
            </div>
            <div class="review-content">
              <p>
                These headphones are absolutely amazing! The noise cancellation
                is better than any other headphones I've tried before, and I've
                tried many. The sound quality is crystal clear with deep bass
                and crisp highs. Battery life is also impressive - I've been
                using them for a week now on a single charge with daily use of
                about 3-4 hours.
              </p>
            </div>
          </div>

          <div class="review-item">
            <div class="review-header">
              <div class="reviewer-info">
                <div class="reviewer-avatar">JD</div>
                <div>
                  <div class="reviewer-name">John Doe</div>
                  <div class="rating-stars">★★★★★</div>
                </div>
              </div>
              <div class="review-date">January 15, 2025</div>
            </div>
            <div class="review-content">
              <p>
                These headphones are absolutely amazing! The noise cancellation
                is better than any other headphones I've tried before, and I've
                tried many. The sound quality is crystal clear with deep bass
                and crisp highs. Battery life is also impressive - I've been
                using them for a week now on a single charge with daily use of
                about 3-4 hours.
              </p>
            </div>
          </div>
        </div>
      </section>
    </main>
    <script type="module" >
      const thumbnails = document.querySelectorAll('.thumbnail');
      const mainImage = document.querySelector('.main-image');

      thumbnails.forEach((thumbnail) => {
        thumbnail.addEventListener('click', () => {
          mainImage.src = thumbnail.src;
          thumbnails.forEach((t) => t.classList.remove('active'));
          thumbnail.classList.add('active');
        });
      });

import { auth, db } from "../../../database/config.js";
import {
  doc,
  getDoc,
  collection,
  query,
  where,
  getDocs,
  orderBy,
} from "https://www.gstatic.com/firebasejs/11.3.1/firebase-firestore.js";

// Fetch product details
async function fetchProductDetails(productId) {
  try {
    const productDocRef = doc(db, "listings", productId);
    const productSnap = await getDoc(productDocRef);
    if (productSnap.exists()) {
      const productData = productSnap.data();
      console.log("Product Details:", productData);
      renderProductDetails(productData);
    } else {
      console.error("Product not found.");
    }
  } catch (error) {
    console.error("Error fetching product details:", error);
  }
}

// Render product details on the page
function renderProductDetails(product) {
  document.querySelector(".product-info h1").textContent = product.name;
  document.querySelector(".current-price").textContent = `$${product.price}`;
  document.querySelector(".old-price").textContent = `$${product.salePrice}`;
  document.querySelector(".stock-count").textContent = `(${product.quantity} available)`;
  document.querySelector(".description").textContent = product.description;
  document.querySelector(".main-image").src = product.mainImageUrl;
}

// Fetch and display orders
async function fetchOrders(userId) {
  try {
    const ordersRef = collection(db, "orders");
    const ordersQuery = query(ordersRef, where("userId", "==", userId), orderBy("createdAt", "desc"));
    const ordersSnapshot = await getDocs(ordersQuery);
    ordersSnapshot.forEach((doc) => {
      console.log("Order:", doc.data());
    });
  } catch (error) {
    console.error("Error fetching orders:", error);
  }
}

// Fetch and display ratings
async function fetchRatings(productId) {
  try {
    const ratingsRef = collection(db, "ratings");
    const ratingsQuery = query(ratingsRef, where("listingId", "==", productId), orderBy("createdAt", "desc"));
    const ratingsSnapshot = await getDocs(ratingsQuery);
    ratingsSnapshot.forEach((doc) => {
      console.log("Rating:", doc.data());
    });
  } catch (error) {
    console.error("Error fetching ratings:", error);
  }
}

// Fetch and display seller notifications
async function fetchSellerNotifications(sellerId) {
  try {
    const notificationsRef = collection(db, "sellerNotifications");
    const notificationsQuery = query(notificationsRef, where("sellerId", "==", sellerId), orderBy("createdAt", "desc"));
    const notificationsSnapshot = await getDocs(notificationsQuery);
    notificationsSnapshot.forEach((doc) => {
      console.log("Notification:", doc.data());
    });
  } catch (error) {
    console.error("Error fetching seller notifications:", error);
  }
}

// Initialize the page
document.addEventListener("DOMContentLoaded", async () => {
  const urlParams = new URLSearchParams(window.location.search);
  const productId = urlParams.get("id");
  const userId = auth.currentUser?.uid;

  if (productId) {
    await fetchProductDetails(productId);
    await fetchRatings(productId);
  }

  if (userId) {
    await fetchOrders(userId);
  }

  const sellerId = "cdGnTQ0F0E1DPiKiN8UB"; // Example seller ID
  await fetchSellerNotifications(sellerId);
});
    </script>
  </body>
</html>
